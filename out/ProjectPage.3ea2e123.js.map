{"version":3,"sources":["scripts/InitExpandableAreas.ts","scripts/AnalyseAndSaveDroppedFile.ts","scripts/ProjectPage.ts"],"names":[],"mappings":"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","file":"ProjectPage.3ea2e123.js","sourceRoot":"..\\src\\packages\\gui","sourcesContent":["\r\nexport default function InitExpandableAreas() {\r\n    let expandableAreas = document.querySelectorAll('.expandable-area');\r\n    let triggerIcons = document.querySelectorAll('.trigger-icon');\r\n\r\n    triggerIcons.forEach((el, i) => {\r\n        const ind = i;\r\n        el.addEventListener('click', ()=>{\r\n            let container = <HTMLElement>expandableAreas[ind];\r\n            let height = container.getBoundingClientRect().height;\r\n            if (container.classList.contains('expandable-area--open')) {\r\n\r\n                container.style.height = `${height}px`;\r\n\r\n                setTimeout(() => {\r\n                    container.classList.remove('expandable-area--open');\r\n                    container.classList.add('expandable-area--closing');\r\n\r\n                    setTimeout(() => {\r\n                        container.style.removeProperty('height');\r\n                        container.classList.remove('expandable-area--closing');\r\n                        container.classList.add('expandable-area--closed');\r\n                    }, 350);\r\n                }, 0);\r\n\r\n            } else if (container.classList.contains('expandable-area--closed')) {\r\n                container.style.height = '0px';\r\n\r\n                setTimeout(() => {\r\n                    container.classList.remove('expandable-area--closed');\r\n                    container.classList.add('expandable-area--opening');\r\n                    container.style.height = `${height}px`;\r\n\r\n                    setTimeout(() => {\r\n                        container.style.removeProperty('height');\r\n                        container.classList.remove('expandable-area--opening');\r\n                        container.classList.add('expandable-area--open');\r\n                    }, 350);\r\n                }, 0);\r\n            }\r\n            el.classList.toggle('trigger-icon--rotated');\r\n        })\r\n    })\r\n}","\r\nexport default function AnalyseAndSaveDroppdFile(file: String) {\r\n    console.log(file);\r\n\r\n    let texType = file.match('(@.*?\\{)')[0];\r\n    texType = texType.substr(1, texType.length - 2);\r\n    let key = file.match('({.*?,)')[0]\r\n    key = key.substr(1, key.length - 2);\r\n    console.log(key);\r\n\r\n    let lines = file.split('\\n');\r\n    let jsonString = '{\\n'\r\n    for (let i=3 ; i< lines.length; i++){\r\n        if(lines[i] === '}') break\r\n        lines[i] = lines[i].substr(1);\r\n        let parts = lines[i].split(' = ');\r\n        console.log(parts)\r\n        let attr = '';\r\n        switch (parts[0]) {\r\n            case 'author': attr = 'Autor'; break;\r\n            case 'year': attr = 'Jahr'; break;\r\n            case 'title': attr = 'Titel'; break;\r\n            case 'pages': attr = 'Seiten'; break;\r\n            case 'volume': attr = 'Ausgabe'; break;\r\n            case 'journal': attr = 'Zeitschrift'; break;\r\n            case 'doi': attr = 'Doi'; break;\r\n        }\r\n        if( attr.length > 0) {\r\n            let value = parts[1].substr(1, parts[1].length - 4);\r\n            jsonString += '\"' + attr + '\": \"' + value + '\",\\n'\r\n        }\r\n    }\r\n    jsonString += '}'\r\n\r\n    jsonString.replaceAll('{\\&}','{{\\&}}')\r\n    let obj = JSON.parse(jsonString)\r\n    console.log(obj)\r\n}","import InitExpandableAreas from \"./InitExpandableAreas\";\r\nimport AnalyseAndSaveDroppdFile from \"./AnalyseAndSaveDroppedFile\";\r\n\r\nclass ProjectPage {\r\n\r\n    constructor() {\r\n        document.addEventListener('DOMContentLoaded', ()=>{\r\n            this.init()\r\n        })\r\n    }\r\n\r\n    private init() {\r\n        InitExpandableAreas();\r\n\r\n        let pname = window.location.href.split('/projects/')[1]\r\n\r\n        document.querySelector('#new-type').addEventListener('click', ()=>{\r\n            (<any>window.parent).setEdit('/editType?project='+pname)\r\n        });\r\n\r\n        document.querySelectorAll('[data-edit-type]').forEach(el => {\r\n            const typeKey = el.getAttribute('data-edit-type');\r\n            el.addEventListener('click', (e)=>{\r\n                if ((<HTMLElement>e.target).getAttribute('data-delete-type')) return\r\n\r\n                (<any>window.parent).setEdit('/editType?project='+pname+'&type='+typeKey)\r\n            });\r\n        });\r\n\r\n        document.querySelectorAll('[data-delete-type]').forEach(el => {\r\n            const typeKey = el.getAttribute('data-delete-type');\r\n            el.addEventListener('click', ()=>{\r\n                fetch('/deleteType?project='+pname+'&type='+typeKey).then(resp =>{\r\n                    if( resp.status === 200 ) {\r\n                        window.location.reload();\r\n                    }\r\n                })\r\n            });\r\n        });\r\n\r\n        document.querySelector('#new-entry').addEventListener('click', ()=>{\r\n            (<any>window.parent).setEdit('/editEntry?project='+pname)\r\n        });\r\n\r\n        document.querySelectorAll('[data-edit-entry]').forEach(el => {\r\n            const entryKey = el.getAttribute('data-edit-entry');\r\n            el.addEventListener('click', (e)=>{\r\n                if ((<HTMLElement>e.target).getAttribute('data-delete-entry')) return\r\n\r\n                (<any>window.parent).setEdit('/editEntry?project='+pname+'&entry='+entryKey)\r\n            });\r\n        })\r\n\r\n        document.querySelectorAll('[data-delete-entry]').forEach(el => {\r\n            const entryKey = el.getAttribute('data-delete-entry');\r\n            el.addEventListener('click', ()=>{\r\n                fetch('/deleteEntry?project='+pname+'&entry='+entryKey).then(resp =>{\r\n                    if( resp.status === 200 ) {\r\n                        window.location.reload();\r\n                    }\r\n                })\r\n            });\r\n        });\r\n\r\n        this.setupDragAndDrop();\r\n    }\r\n\r\n    private setupDragAndDrop() {\r\n\r\n        let area = document.querySelector('#drop_zone');\r\n        area.addEventListener('dragover', (e)=>{\r\n            e.preventDefault();\r\n        })\r\n        area.addEventListener('drop', (e: DragEvent)=>{\r\n            e.preventDefault()\r\n            const dT = new DataTransfer();\r\n            dT.items.add(e.dataTransfer.files[0]);\r\n            let reader = new FileReader();\r\n            reader.readAsText(dT.files[0], \"UTF-8\");\r\n            reader.onload = function (evt) {\r\n\r\n                AnalyseAndSaveDroppdFile(<string>reader.result)\r\n                //Dialog mit Textfeld öffnen => gewünscht Zitierweise eingeben\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nnew ProjectPage();"]}